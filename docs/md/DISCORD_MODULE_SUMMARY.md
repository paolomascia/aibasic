# Discord Module - Complete Reference

## Overview

The **Discord module** provides comprehensive Discord integration via webhooks for notifications, alerts, and team communication.

**Module Type**: `(discord)`
**Primary Use Cases**: Notifications, alerts, monitoring, team collaboration, bot integration

---

## Configuration

```ini
[discord]
WEBHOOK_URL = https://discord.com/api/webhooks/YOUR_WEBHOOK_ID/YOUR_WEBHOOK_TOKEN
BOT_TOKEN =
DEFAULT_USERNAME = AIbasic Bot
DEFAULT_AVATAR_URL =
RATE_LIMIT_RETRY = true
MAX_RETRIES = 3
```

**Getting a Webhook URL:**
1. Go to your Discord server
2. Server Settings â†’ Integrations â†’ Webhooks
3. Click "Create Webhook" or "New Webhook"
4. Copy the webhook URL

---

## Basic Operations

```basic
REM Send simple message
10 (discord) send message "Hello from AIbasic!"

REM Send message with custom username
20 (discord) send message "Custom bot message" with username "My Bot"

REM Send notification
30 (discord) send notification with title "Success" and message "Operation completed" and level "success"

REM Send alert
40 (discord) send alert "Server CPU usage is high!"

REM Send status update
50 (discord) send status update for service "Web Server" with status "online"

REM Send log message
60 (discord) send log with level "ERROR" and message "Failed to connect" and source "app.py"
```

---

## Advanced Features

### Rich Embeds

```basic
REM Create and send embed
10 LET embed = (discord) create embed with title "Monthly Report" and description "Sales summary" and color 0x2ECC71
20 (discord) send embed embed

REM Embed with fields
30 LET fields = [
40   {"name": "Revenue", "value": "$50,000", "inline": true},
50   {"name": "Growth", "value": "+15%", "inline": true},
60   {"name": "Status", "value": "âœ… On track", "inline": false}
70 ]
80 LET embed = (discord) create embed with title "Q1 Report" and fields fields and color 0x3498DB
90 (discord) send embed embed

REM Embed with author and footer
100 LET author = {"name": "John Doe", "url": "https://example.com", "icon_url": "https://example.com/avatar.png"}
110 LET footer = {"text": "Generated by AIbasic", "icon_url": "https://example.com/icon.png"}
120 LET embed = (discord) create embed with title "Report" and author author and footer footer and color 0x9B59B6
130 (discord) send embed embed

REM Embed with image and thumbnail
140 LET embed = (discord) create embed with title "Screenshot" and image "https://example.com/screenshot.png" and thumbnail "https://example.com/thumb.png" and color 0xE91E63
150 (discord) send embed embed
```

### Notifications (Pre-formatted Messages)

```basic
REM Info notification (blue)
10 (discord) send notification with title "Information" and message "System update available" and level "info"

REM Success notification (green)
20 (discord) send notification with title "Success" and message "Deployment completed successfully" and level "success"

REM Warning notification (orange)
30 (discord) send notification with title "Warning" and message "Disk space low" and level "warning"

REM Error notification (red)
40 (discord) send notification with title "Error" and message "Database connection failed" and level "error"

REM Custom color notification
50 (discord) send notification with title "Custom" and message "Purple notification" and color 0x9B59B6
```

### Alerts with Mentions

```basic
REM Simple alert
10 (discord) send alert "Server is down!"

REM Alert with @everyone mention
20 (discord) send alert "Critical system failure!" with mention_everyone true

REM Alert mentioning specific users
30 LET users = ["123456789", "987654321"]
40 (discord) send alert "Your attention required" with mention_users users

REM Alert mentioning roles
50 LET roles = ["111111111", "222222222"]
60 (discord) send alert "Admins please check" with mention_roles roles
```

### Status Updates

```basic
REM Service online (green)
10 (discord) send status update for service "Web Server" with status "online"

REM Service degraded (orange)
20 (discord) send status update for service "Database" with status "degraded" and details "High latency detected"

REM Service offline (red)
30 (discord) send status update for service "API Gateway" with status "offline" and details "Connection timeout"
```

### Log Messages

```basic
REM Debug log
10 (discord) send log with level "DEBUG" and message "Variable value: 42" and source "app.py"

REM Info log
20 (discord) send log with level "INFO" and message "Application started" and source "main.py"

REM Warning log
30 (discord) send log with level "WARNING" and message "Memory usage at 85%" and source "monitor.py"

REM Error log
40 (discord) send log with level "ERROR" and message "Failed to connect to database" and source "db.py"

REM Critical log
50 (discord) send log with level "CRITICAL" and message "System crash imminent" and source "system.py"
```

### File Attachments

```basic
REM Send file
10 (discord) send file "report.pdf" with content "Monthly report attached"

REM Send file with custom filename
20 (discord) send file "data.csv" with filename "export_2025.csv" and content "Data export"

REM Send image
30 (discord) send file "screenshot.png" with content "Check this out!"
```

### Message Management

```basic
REM Send message and get ID
10 LET response = (discord) send message "This will be edited"
20 LET message_id = response["id"]

REM Edit message
30 (discord) edit message message_id with content "This has been edited!"

REM Delete message
40 (discord) delete message message_id
```

---

## Common Use Cases

### Error Monitoring

```basic
10 PRINT "=== Error Monitoring ==="
20 ON ERROR GOTO 100

30 REM Your code here
40 LET result = 10 / 0
50 GOTO 200

100 REM Error handler
110 LET error_msg = STR(_last_error)
120 LET error_line = STR(_last_error_line)

130 LET fields = [
140   {"name": "Error", "value": error_msg, "inline": false},
150   {"name": "Line", "value": error_line, "inline": true}
160 ]

170 LET embed = (discord) create embed with title "âš ï¸ Application Error" and description "An error occurred" and color 0xE74C3C and fields fields
180 (discord) send embed embed
190 (discord) send alert "Critical error detected!"

200 PRINT "Error handled"
```

### Deployment Notifications

```basic
10 PRINT "=== Deployment Notification ==="
20 REM Deployment started
30 LET fields = [
40   {"name": "Environment", "value": "Production", "inline": true},
50   {"name": "Version", "value": "v2.5.0", "inline": true},
60   {"name": "Deployer", "value": "CI/CD Pipeline", "inline": true}
70 ]
80 LET embed = (discord) create embed with title "ðŸš€ Deployment Started" and description "Deploying to production" and color 0x3498DB and fields fields
90 (discord) send embed embed

100 REM Simulate deployment
110 SLEEP 3

120 REM Deployment successful
130 LET fields = [
140   {"name": "Environment", "value": "Production", "inline": true},
150   {"name": "Version", "value": "v2.5.0", "inline": true},
160   {"name": "Duration", "value": "3 minutes", "inline": true}
170 ]
180 LET embed = (discord) create embed with title "âœ… Deployment Successful" and description "Production deployment completed" and color 0x2ECC71 and fields fields
190 (discord) send embed embed
```

### Server Health Monitoring

```basic
10 PRINT "=== Server Health Monitoring ==="
20 REM Collect metrics
30 LET cpu_usage = 45
40 LET memory_usage = 62
50 LET disk_usage = 78

60 REM Create report
70 LET fields = [
80   {"name": "CPU Usage", "value": STR(cpu_usage) + "%", "inline": true},
90   {"name": "Memory Usage", "value": STR(memory_usage) + "%", "inline": true},
100   {"name": "Disk Usage", "value": STR(disk_usage) + "%", "inline": true},
110   {"name": "Status", "value": "ðŸŸ¢ Healthy", "inline": true}
120 ]

130 LET embed = (discord) create embed with title "ðŸ“Š Server Health Report" and description "Current system metrics" and color 0x2ECC71 and fields fields
140 (discord) send embed embed

150 REM Alert if disk usage high
160 IF disk_usage > 75 THEN
170   (discord) send notification with title "Disk Space Warning" and message "Disk usage at " + STR(disk_usage) + "%" and level "warning"
180 END IF
```

### Backup Status Reports

```basic
10 PRINT "=== Backup Status Report ==="
20 (discord) send notification with title "Backup Started" and message "Daily database backup initiated" and level "info"

30 REM Simulate backup
40 SLEEP 2

50 LET fields = [
60   {"name": "Database", "value": "production_db", "inline": true},
70   {"name": "Size", "value": "2.5 GB", "inline": true},
80   {"name": "Duration", "value": "12 minutes", "inline": true},
90   {"name": "Location", "value": "s3://backups/2025-01-17/", "inline": false},
100   {"name": "Status", "value": "âœ… Success", "inline": true}
110 ]

120 LET footer = {"text": "Next backup: 2025-01-18 00:00:00"}
130 LET embed = (discord) create embed with title "ðŸ’¾ Backup Completed" and description "Database backup successful" and color 0x2ECC71 and fields fields and footer footer
140 (discord) send embed embed
```

### API Usage Tracking

```basic
10 PRINT "=== API Usage Tracking ==="
20 LET fields = [
30   {"name": "Total Requests", "value": "125,430", "inline": true},
40   {"name": "Unique Users", "value": "3,245", "inline": true},
50   {"name": "Avg Requests/User", "value": "38.6", "inline": true},
60   {"name": "Peak Hour", "value": "14:00-15:00 UTC", "inline": true}
70 ]

80 LET footer = {"text": "Report generated: 2025-01-17 23:59:59"}
90 LET embed = (discord) create embed with title "ðŸ“Š Daily API Usage" and description "Usage statistics" and color 0x2ECC71 and fields fields and footer footer
100 (discord) send embed embed

110 REM Rate limit alert
120 LET fields = [
130   {"name": "User", "value": "api_user_12345", "inline": true},
140   {"name": "Limit", "value": "1000 req/hour", "inline": true},
150   {"name": "Actual", "value": "1523 req/hour", "inline": true}
160 ]
170 LET embed = (discord) create embed with title "ðŸš¦ Rate Limit Exceeded" and color 0xE67E22 and fields fields
180 (discord) send embed embed
```

### CI/CD Pipeline Integration

```basic
10 PRINT "=== Build Pipeline Integration ==="
20 REM Build started
30 LET fields = [
40   {"name": "Branch", "value": "main", "inline": true},
50   {"name": "Commit", "value": "a1b2c3d", "inline": true},
60   {"name": "Author", "value": "developer@example.com", "inline": true}
70 ]
80 LET embed = (discord) create embed with title "âš™ï¸ Build Started" and description "CI/CD pipeline initiated" and color 0x3498DB and fields fields
90 (discord) send embed embed

100 REM Test results
110 LET fields = [
120   {"name": "Total Tests", "value": "245", "inline": true},
130   {"name": "Passed", "value": "âœ… 242", "inline": true},
140   {"name": "Failed", "value": "âŒ 3", "inline": true}
150 ]
160 LET embed = (discord) create embed with title "ðŸ§ª Test Results" and color 0xF39C12 and fields fields
170 (discord) send embed embed
```

---

## Message Formatting

### Markdown Support

```basic
REM Bold, italic, strikethrough
10 (discord) send message "**Bold text** *italic text* ~~strikethrough~~"

REM Code blocks
20 (discord) send message "`inline code` ```python\nprint('code block')\n```"

REM Links
30 (discord) send message "[Click here](https://example.com)"

REM Quotes
40 (discord) send message "> This is a quote"

REM Lists
50 (discord) send message "- Item 1\n- Item 2\n- Item 3"
```

### Emojis

```basic
REM Unicode emojis
10 (discord) send message "ðŸš€ Launch successful! âœ… All systems go ðŸŽ‰"

REM Custom emojis (use emoji name from your server)
20 (discord) send message ":custom_emoji_name:"
```

---

## Best Practices

### Use Embeds for Structured Data
```basic
REM Good - structured embed
10 LET embed = (discord) create embed with title "Report" and fields fields and color 0x2ECC71
20 (discord) send embed embed

REM Avoid - plain text for complex data
30 (discord) send message "Report\nRevenue: $50000\nGrowth: 15%"
```

### Color Coding for Severity
```basic
REM Use standard colors
10 LET green = 0x2ECC71    # Success
20 LET red = 0xE74C3C      # Error
30 LET orange = 0xF39C12   # Warning
40 LET blue = 0x3498DB     # Info
```

### Include Timestamps
```basic
10 LET timestamp = "2025-01-17T12:00:00.000Z"
20 LET embed = (discord) create embed with title "Event" and timestamp timestamp
```

### Don't Expose Webhook URLs
```basic
REM Store webhook URL in config file, not in code
REM Use environment variables for sensitive data
```

### Handle Rate Limits
The module automatically handles rate limits with retry logic. Configure `RATE_LIMIT_RETRY` and `MAX_RETRIES` in your config.

---

## Embed Limits

- **Content**: 2000 characters max
- **Embed Title**: 256 characters max
- **Embed Description**: 4096 characters max
- **Fields**: 25 max
- **Field Name**: 256 characters max
- **Field Value**: 1024 characters max
- **Total Embed Size**: 6000 characters max

---

## Rate Limits

- **Webhooks**: 30 requests per minute per webhook
- **Global**: 50 requests per second
- The module automatically retries on 429 (Too Many Requests) responses

---

## Color Reference

Common color codes (hexadecimal integers):

- **Green** (Success): `0x2ECC71`
- **Red** (Error): `0xE74C3C`
- **Orange** (Warning): `0xF39C12`
- **Blue** (Info): `0x3498DB`
- **Purple**: `0x9B59B6`
- **Teal**: `0x1ABC9C`
- **Dark Red** (Critical): `0x992D22`
- **Gray**: `0x95A5A6`

---

## Troubleshooting

### Webhook Not Working
```basic
REM Check webhook URL format
REM Should be: https://discord.com/api/webhooks/{id}/{token}

REM Test with simple message
10 (discord) send message "Test"
```

### Message Not Appearing
```basic
REM Check webhook permissions in Discord channel
REM Ensure webhook hasn't been deleted
REM Verify webhook URL is correct
```

### Rate Limit Errors
```basic
REM Enable retry in config
REM RATE_LIMIT_RETRY = true
REM MAX_RETRIES = 3

REM Add delays between messages if sending many
10 (discord) send message "Message 1"
20 SLEEP 1
30 (discord) send message "Message 2"
```

---

## Module Information

- **Module Name**: DiscordModule
- **Task Type**: `(discord)`
- **Dependencies**: `requests>=2.31.0` (already included in AIbasic)
- **API Version**: Discord API v10
- **Documentation**: https://discord.com/developers/docs
